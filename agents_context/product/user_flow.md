# TheraType 사용자 플로우

**문서 목적**: 전체 사용자 여정 및 화면 전환 흐름 정의

---

## 플로우 분류

| 플로우 유형 | 설명 | 빈도 |
|-----------|------|------|
| **Onboarding Flow** | 첫 방문 → 회원가입 → 온보딩 | 1회 (신규 사용자) |
| **Insight Flow** | Insight Mode 전체 과정 | 첫 주 1회, 이후 2-4주 1회 |
| **Therapy Flow** | Therapy Mode 일일 연습 | 매일 1-2회 |
| **Dashboard Flow** | 진행 추적 및 분석 | 수시 |
| **Settings Flow** | 설정 변경 및 계정 관리 | 필요 시 |

---

## 1. Onboarding Flow (첫 방문 사용자)

### 1.1 플로우 다이어그램

```
[랜딩 페이지]
    │
    ├─→ [로그인] (기존 사용자)
    │       │
    │       └─→ [대시보드] → [Insight/Therapy 선택]
    │
    └─→ [회원가입]
            │
            ├─ 이메일/비밀번호 입력
            ├─ 개인정보 동의 체크
            └─→ [온보딩 소개] (3페이지 슬라이드)
                    │
                    ├─ 1페이지: TheraType 소개
                    ├─ 2페이지: 두 가지 모드 설명
                    ├─ 3페이지: 진행 추적 소개
                    │
                    └─→ [기본 정보 입력]
                            │
                            ├─ 나이대 선택 *
                            ├─ 성별 선택 (선택)
                            ├─ 타이핑 실력 선택 *
                            │   └─ [타이핑 테스트] (선택)
                            │
                            └─→ [Insight Mode 시작 안내]
                                    │
                                    └─→ [Insight Flow로 진입]
```

### 1.2 상세 단계별 설명

#### 단계 1: 랜딩 페이지 (0초)
- **목적**: TheraType 가치 제안 전달
- **핵심 메시지**: "타이핑하며 마음을 돌보다"
- **CTA**: "무료로 시작하기" (primary), "로그인" (secondary)
- **의사결정**: 신규 vs 기존 사용자 분기

**데이터 수집**: 없음

---

#### 단계 2: 회원가입 (30초 ~ 1분)
- **목적**: 계정 생성 및 기본 동의 획득
- **입력 필드**:
  - 이메일 (필수, 형식 검증)
  - 비밀번호 (필수, 8자 이상, 강도 표시)
  - 비밀번호 확인
- **동의 항목**:
  - ☑ 개인정보 수집 및 이용 동의 (필수)
  - ☐ 서비스 개선을 위한 데이터 제공 (선택)
- **검증**:
  - 이메일 중복 확인
  - 비밀번호 일치 확인
  - 필수 동의 체크 확인

**데이터 수집**:
```javascript
{
  email: "user@example.com",
  passwordHash: "...",
  agreedToTerms: true,
  agreedToDataUsage: true/false,
  createdAt: timestamp
}
```

**에러 처리**:
- 이메일 중복 → "이미 가입된 이메일입니다. 로그인하시겠어요?"
- 비밀번호 불일치 → "비밀번호가 일치하지 않습니다."
- 네트워크 오류 → "연결에 실패했습니다. 다시 시도해주세요."

---

#### 단계 3: 온보딩 소개 (1-2분)
- **목적**: TheraType 사용법 이해
- **페이지 수**: 3페이지 (스와이프 가능)
- **내용**:
  - 1페이지: "타이핑하며 마음을 돌보세요"
  - 2페이지: "두 가지 모드로 성장하세요" (Insight + Therapy)
  - 3페이지: "진행 과정을 확인하세요" (대시보드)
- **인터랙션**:
  - [건너뛰기] → 바로 기본 정보 입력으로
  - [다음] → 순차적 진행
  - 점(dot) 클릭 → 특정 페이지 이동

**데이터 수집**:
```javascript
{
  userId: "user_123",
  onboardingCompleted: true/false,
  skipped: true/false,
  viewedPages: [1, 2, 3] // 본 페이지 번호
}
```

---

#### 단계 4: 기본 정보 입력 (30초 ~ 1분)
- **목적**: 개인화에 필요한 최소 정보 수집
- **입력 항목**:
  - 나이대 * (19-25, 26-35, 36-45, 46+)
  - 성별 (남성, 여성, 기타, 선택 안 함)
  - 타이핑 실력 * (초급 <30WPM, 중급 30-50, 고급 50+)
- **선택적 기능**:
  - [간단 테스트로 확인하기] → 1분간 문장 타이핑 → WPM 자동 계산
- **검증**:
  - 필수 항목(*) 미선택 시 "다음" 버튼 비활성화

**데이터 수집**:
```javascript
{
  userId: "user_123",
  ageGroup: "26-35",
  gender: "female" | null,
  typingLevel: "intermediate",
  typingTestResult: { wpm: 42, accuracy: 95 } | null,
  completedAt: timestamp
}
```

---

#### 단계 5: Insight Mode 시작 안내 (10초)
- **목적**: 첫 Insight Mode 안내 및 기대 설정
- **메시지**:
  - "이제 당신에 대해 알아가는 시간이에요"
  - "10개 문장 쌍 중 공감되는 것을 선택하고 타이핑하세요"
  - "예상 소요 시간: 15-20분"
- **CTA**: [시작하기]

**데이터 수집**: 없음 (전환만 기록)

---

### 1.3 Onboarding 완료 기준

✅ 다음 조건 모두 충족 시 온보딩 완료:
- 회원가입 완료
- 기본 정보 입력 완료
- 첫 Insight Mode 세션 완료 (10개 문장 쌍)

완료 후: `user.onboardingCompleted = true` → 재로그인 시 바로 대시보드로

---

## 2. Insight Flow (자기인식 탐색)

### 2.1 플로우 다이어그램

```
[Insight Mode 시작 화면]
    │
    ├─ 설명 읽기 (선택적)
    └─→ [시작하기] 클릭
            │
            └─→ [문장 쌍 1/10]
                    │
                    ├─ 문장 A vs B 제시
                    ├─ 사용자 선택 (A 또는 B)
                    │   └─ 선택 시간 기록
                    │
                    └─→ [타이핑 화면]
                            │
                            ├─ 선택한 문장 타이핑
                            ├─ 실시간 WPM/정확도 표시
                            ├─ 키스트로크 로깅
                            │
                            └─→ [완료] (자동 다음 단계)
                                    │
                                    ├─ 2/10 ~ 9/10 반복
                                    │
                                    └─→ [문장 쌍 10/10 완료]
                                            │
                                            └─→ [결과 화면]
                                                    │
                                                    ├─ 점수 계산
                                                    ├─ 프로파일 분류
                                                    ├─ 인사이트 제공
                                                    │
                                                    └─→ [Therapy Mode 시작하기]
                                                            또는
                                                        [나중에 하기] → [대시보드]
```

### 2.2 상세 단계별 설명

#### 단계 1: Insight Mode 시작 화면
- **조건**:
  - 첫 방문: 온보딩 직후 자동 진입
  - 재방문: 대시보드에서 "Insight 다시하기" 클릭
- **정보 제공**:
  - 어떻게 하는지
  - 예상 소요 시간
  - 마지막 완료 일자 (재방문 시)
- **CTA**: [시작하기]

**데이터 수집**:
```javascript
{
  userId: "user_123",
  sessionId: "insight_20250130_001",
  startedAt: timestamp,
  sessionType: "initial" | "reassessment"
}
```

---

#### 단계 2-11: 문장 쌍 제시 및 타이핑 (15-20분)

**각 문장 쌍마다**:

**2-1. 선택 화면**:
- 문장 A와 B 동시 제시
- 진행 상태 표시 (X/10)
- [이 문장 선택하기] 버튼 2개
- 선택 시간 측정 (제시 → 클릭)

**2-2. 타이핑 화면**:
- 선택한 문장 상단 표시
- 입력창에 실시간 타이핑
- 실시간 피드백:
  - 정확한 글자: 검은색
  - 틀린 글자: 빨간색, 커서 자동 복귀
- WPM/정확도 실시간 계산
- 완료 시 자동 다음 단계 (0.5초 대기 후)

**데이터 수집 (문장 쌍별)**:
```javascript
{
  pairId: "SP1",
  category: "self_perception",
  sentenceA: "...",
  sentenceB: "...",
  selected: "A" | "B",
  selectionTime: 3500,  // ms
  typingMetrics: {
    wpm: 42,
    accuracy: 94,
    timeMs: 15000,
    backspaceCount: 3,
    pauseCount: 1,
    pauseLocations: [12]
  }
}
```

**진행 중 이탈 처리**:
- 브라우저 닫기 시: 진행 상태 로컬 스토리지 저장
- 재방문 시: "이어서 하기" vs "처음부터 하기" 선택지 제공

---

#### 단계 12: 결과 화면 (1-2분)

**표시 정보**:
1. **카테고리별 점수 (막대 그래프)**:
   - 자기인식: 60%
   - 스트레스 대응: 30% (⚠️ 표시)
   - 사회적 에너지: 80% (내향/외향 레이블)
   - 감정 조절: 50%
   - 미래 지향성: 70%

2. **인사이트 메시지** (점수 기반 생성):
   - "스트레스 대응 지원이 필요해 보여요"
   - "미래에 대한 긍정적 관점을 가지고 있네요!"

3. **추천 프로파일**:
   - "스트레스 관리형"
   - Therapy Mode 추천 문구

**인터랙션**:
- [Therapy Mode 시작하기] → Therapy Flow 진입
- [나중에 하기] → 대시보드
- [결과 다운로드] → PNG 이미지 저장
- [SNS 공유] (선택적 기능)

**데이터 수집**:
```javascript
{
  sessionId: "insight_20250130_001",
  completedAt: timestamp,
  profileScores: {
    self_perception: 60,
    stress_response: 30,
    social_energy: 80,
    emotion_regulation: 50,
    future_orientation: 70
  },
  assignedProfile: "stress_management",
  userAction: "started_therapy" | "deferred" | "downloaded_result"
}
```

---

### 2.3 Insight 재평가 플로우 (재방문 사용자)

**시기**: 첫 Insight 후 2-4주 후 권장

**차이점**:
- 시작 화면에 "마지막 Insight 완료: 2주 전" 표시
- 결과 화면에 **변화 추이** 추가:
  ```
  이번 주 변화
  자기인식       ████████░░ 60% (+10 ↑)
  스트레스 대응   ███░░░░░░░ 30% (-5 ↓)
  감정 조절      ████░░░░░░ 40% (→)
  ```
- 인사이트: "지난주보다 긍정적 선택이 2개 증가했어요!"

---

## 3. Therapy Flow (일일 연습)

### 3.1 플로우 다이어그램

```
[Therapy Mode 시작 화면]
    │
    ├─ 프로파일 확인 (Insight 결과 기반)
    ├─ 오늘의 연습 문장 3-5개 제시
    └─→ [시작하기] 클릭
            │
            └─→ [문장 1: 제시 화면]
                    │
                    ├─ 문장 텍스트
                    ├─ 의미 설명
                    ├─ 이전 연습 기록 (있는 경우)
                    │
                    └─→ [타이핑 시작]
                            │
                            ├─ 타이핑 입력
                            ├─ 실시간 피드백
                            │
                            └─→ [완료 피드백]
                                    │
                                    ├─ WPM/정확도 표시
                                    ├─ 마스터리 진행도
                                    ├─ 배지 획득 (조건 충족 시)
                                    │
                                    └─→ 선택지:
                                            ├─ [다음 문장] → 문장 2로
                                            ├─ [한 번 더 연습] → 같은 문장 반복
                                            └─ [종료] → 세션 종료 화면
                                                    │
                                                    └─→ [대시보드]
```

### 3.2 상세 단계별 설명

#### 단계 1: Therapy Mode 시작 화면

**표시 정보**:
- 현재 프로파일 (Insight 기반)
- 오늘의 연습 문장 목록 (3-5개)
  - 워밍업 1-2개 (복습)
  - 새 문장 2-3개
  - 도전 과제 1개 (선택적)
- 연속 사용 일수 (스트릭)
- 마스터한 문장 수

**선택 기능**:
- [프로파일 변경] → 4개 프로파일 중 수동 선택 가능

**데이터 수집**:
```javascript
{
  userId: "user_123",
  sessionId: "therapy_20250130_001",
  startedAt: timestamp,
  currentProfile: "stress_management",
  selectedProfile: "stress_management" | "self_esteem" | ... // 변경 시
}
```

---

#### 단계 2: 문장 제시 화면

**표시 정보**:
- 문장 텍스트 (크게 표시)
- 난이도 배지 (초급/중급/고급)
- 카테고리 태그
- 의미 설명 (치료적 의도)
- 이전 연습 기록 (있는 경우):
  - "1회: 48 WPM, 98% (3일 전)"

**인터랙션**:
- 최소 3초 후 [타이핑 시작] 버튼 활성화 (읽을 시간 제공)

**데이터 수집**:
```javascript
{
  sentenceId: "SM-01",
  presentedAt: timestamp,
  readingTime: 5000  // ms, 제시 → 타이핑 시작 클릭
}
```

---

#### 단계 3: 타이핑 화면

**인터페이스**:
- 상단: 제시 문장 (고정)
- 중앙: 타이핑 입력창
- 하단: 실시간 WPM, 정확도, 경과 시간
- 진행 바 (문장 내 위치)

**실시간 피드백**:
- 정확: 글자 검은색
- 오류: 글자 빨간색, 삐 소리 (선택적), 자동 수정

**추가 기능**:
- [일시정지]: 타이머 멈춤, 화면 블러
- [다시 시작]: 처음부터 재시작
- [건너뛰기]: 이 문장 넘기기 (마스터리 영향 없음)

**데이터 수집**:
```javascript
{
  sentenceId: "SM-01",
  attemptNumber: 2,
  keystrokeLog: [...],  // 상세 키스트로크 (선택적)
  metrics: {
    wpm: 48,
    accuracy: 98,
    timeMs: 12000,
    errorPositions: [8],
    pauseCount: 0,
    backspaceCount: 1
  }
}
```

---

#### 단계 4: 완료 피드백 화면

**표시 정보**:
1. **성취 축하**: "완료! 🎉"
2. **문장 복기**: 타이핑한 문장 다시 표시
3. **성과 지표**:
   - ⚡ 속도: 48 WPM (+3 from avg)
   - 🎯 정확도: 98%
   - ⏱️ 소요 시간: 12초
4. **마스터리 진행도**:
   - "이 문장을 2번 더 연습하면 완전히 익힐 수 있어요!"
   - 현재 마스터리: ████████░░ 80%
5. **배지 획득** (조건 충족 시):
   - "완벽주의자: 정확도 100% 달성!"
   - Confetti 애니메이션

**선택지**:
- [다음 문장] (primary)
- [한 번 더 연습] (secondary)
- [종료] (tertiary)

**데이터 수집**:
```javascript
{
  sentenceId: "SM-01",
  completedAt: timestamp,
  masteryProgress: 80,
  badgeEarned: "perfectionist" | null,
  userAction: "next" | "repeat" | "exit"
}
```

---

#### 단계 5: 세션 종료 화면

**조건**: 모든 문장 완료 또는 [종료] 선택

**표시 정보**:
- 오늘의 요약:
  - 연습한 문장 수: 5개
  - 평균 WPM: 46
  - 평균 정확도: 96%
  - 마스터한 문장 +1: 총 9개
- 스트릭 업데이트: "5일 연속 사용 중! 🔥"
- 다음 연습 권장 시간: "내일 오후 8시에 또 만나요!"

**CTA**:
- [대시보드 보기]
- [오늘 한 번 더]

**데이터 수집**:
```javascript
{
  sessionId: "therapy_20250130_001",
  completedAt: timestamp,
  summary: {
    sentencesCompleted: 5,
    avgWpm: 46,
    avgAccuracy: 96,
    newMastered: 1,
    totalMastered: 9
  },
  streakDays: 5
}
```

---

### 3.3 Therapy 사용 패턴

#### 이상적 루틴
- **빈도**: 하루 1회 (매일 같은 시간 권장)
- **시간**: 10-15분
- **문장 수**: 3-5개
- **타이밍**: 아침 (동기부여형) 또는 저녁 (스트레스 관리형)

#### 유연한 사용
- 바쁜 날: 1-2개만 (5분 미만)
- 여유 있는 날: 10개까지 (30분)

---

## 4. Dashboard Flow (진행 추적)

### 4.1 플로우 다이어그램

```
[대시보드]
    │
    ├─ 요약 카드 (스트릭, 마스터 문장)
    ├─ 타이핑 속도 추이 그래프
    ├─ 심리 프로파일 레이더 차트
    ├─ 획득한 배지
    │
    └─→ 선택지:
            ├─ [Insight 다시하기] → Insight Flow
            ├─ [오늘의 연습 시작] → Therapy Flow
            ├─ [상세 통계 보기] (선택적 기능)
            └─ [설정] → Settings Flow
```

### 4.2 데이터 시각화

#### 타이핑 속도 추이 (Line Chart)
- X축: 최근 7일 (또는 30일)
- Y축: WPM
- 데이터 포인트 호버 시 상세 정보 툴팁

#### 심리 프로파일 (Radar Chart)
- 5개 축:
  - 자기인식
  - 스트레스 대응
  - 사회적 에너지
  - 감정 조절
  - 미래 지향성
- 최근 Insight 결과 표시
- 이전 결과와 비교 (점선으로 표시)

#### 배지 컬렉션 (Grid)
- 획득한 배지: 컬러
- 미획득 배지: 회색, 잠금 아이콘
- 클릭 시 획득 조건 및 날짜 표시

---

## 5. Settings Flow (설정 및 계정 관리)

### 5.1 플로우 다이어그램

```
[설정]
    │
    ├─ 계정 정보 (이메일, 가입일)
    │   └─→ [프로필 수정]
    │           ├─ 나이대 변경
    │           ├─ 성별 변경
    │           └─ 타이핑 실력 (시스템 자동 업데이트)
    │
    ├─ 프라이버시 및 데이터
    │   ├─ 동의 설정 변경 (체크박스)
    │   ├─ [내 데이터 다운로드] → JSON 파일 다운로드
    │   └─ [개인정보처리방침 보기]
    │
    ├─ 알림
    │   ├─ 일일 연습 리마인더 (ON/OFF)
    │   └─ 주간 리포트 알림 (ON/OFF)
    │
    ├─ 앱 정보
    │   ├─ [사용 가이드]
    │   ├─ [FAQ]
    │   ├─ [피드백 보내기] → 외부 폼
    │   └─ [버전 정보]
    │
    └─ 계정 관리
        ├─ [로그아웃] → 확인 다이얼로그 → 랜딩 페이지
        └─ [계정 삭제] → 2단계 확인 → 완전 삭제 (30일 이내)
```

### 5.2 데이터 다운로드 형식 (JSON)

**사용자가 다운로드하는 데이터**:
```json
{
  "user": {
    "email": "user@example.com",
    "ageGroup": "26-35",
    "createdAt": "2025-01-15"
  },
  "insightSessions": [
    {
      "sessionId": "...",
      "completedAt": "2025-01-30",
      "profileScores": {...}
    }
  ],
  "therapySessions": [
    {
      "sessionId": "...",
      "date": "2025-01-30",
      "sentences": [...]
    }
  ],
  "progress": {
    "totalSessions": 15,
    "avgWpm": 46,
    "masteredSentences": 9
  }
}
```

---

## 6. 특수 플로우

### 6.1 중도 이탈 복구 플로우

**시나리오**: Insight/Therapy 도중 브라우저 닫음

**복구 메커니즘**:
1. 진행 상태 LocalStorage 저장
2. 재방문 시 감지
3. 팝업 표시:
   ```
   이어서 하시겠어요?

   [이어서 하기] [처음부터 하기] [취소]
   ```
4. [이어서 하기] → 마지막 위치부터
5. [처음부터] → 이전 데이터 삭제, 새로 시작

**데이터 처리**:
- 이어서 완료 시: 정상 세션으로 저장
- 처음부터 시: 새 세션 ID 생성

---

### 6.2 오류 복구 플로우

**네트워크 오류**:
```
[타이핑 화면]
    │
    └─ 데이터 저장 실패 (네트워크 오류)
        │
        └─→ [오류 메시지 표시]
                │
                ├─ "연결에 실패했습니다"
                ├─ "로컬에 임시 저장되었습니다"
                │
                └─→ [다시 시도] → 재전송
                    [계속하기] → 로컬 저장만, 나중에 동기화
```

**서버 오류 (500)**:
```
[치명적 오류 페이지]
    │
    ├─ "서비스에 일시적 문제가 발생했습니다"
    ├─ "잠시 후 다시 시도해주세요"
    │
    └─→ [홈으로 돌아가기]
```

---

## 7. 플로우 최적화 전략

### 7.1 진입 장벽 최소화

**원칙**: 클릭 횟수 최소화
- 랜딩 → 회원가입: 1 클릭
- 로그인 → Therapy 시작: 2 클릭
- 대시보드 → Insight 시작: 1 클릭

**스킵 가능 단계**:
- 온보딩 슬라이드 (건너뛰기)
- 문장 의미 설명 (바로 타이핑)

---

### 7.2 이탈 방지 전략

**중요 시점 개입**:
1. **Insight Mode 3번째 문장 후**:
   - 진행 바 강조: "30% 완료! 계속하면 당신의 프로파일을 알 수 있어요"

2. **Therapy 첫 문장 완료 후**:
   - 즉각 긍정 피드백: "완료! 첫 문장을 마스터하는 여정이 시작됐어요"

3. **3일 연속 사용 후**:
   - 배지 획득: "🔥 연속 3일 달성! 습관이 형성되고 있어요"

**재방문 유도**:
- 이메일 알림 (동의 시):
  - "오늘 아직 연습하지 않으셨어요. 5분만 투자해보세요!"
  - "지난주보다 타이핑 속도가 8 WPM 올랐어요!"
- 푸시 알림 (PWA 설치 시):
  - "오후 8시예요. 오늘의 긍정 문구를 연습해볼까요?"

---

### 7.3 성취감 극대화

**즉각 피드백**:
- 타이핑 중: 실시간 WPM 표시
- 완료 즉시: 축하 메시지 + 성과 지표

**점진적 보상**:
- 1일차: "첫 세션 완료!"
- 3일차: "3일 연속" 배지
- 7일차: "1주일 달성" 배지
- 21일차: "습관 형성" 배지

**사회적 비교 (선택적)**:
- "평균 사용자보다 15% 빠른 성장이에요!"
- (주의: 부정적 영향 최소화)

---

## 8. 플로우별 예상 소요 시간

| 플로우 | 최소 시간 | 평균 시간 | 최대 시간 |
|-------|---------|----------|----------|
| Onboarding | 2분 | 5분 | 10분 |
| Insight (첫 회) | 10분 | 18분 | 30분 |
| Insight (재평가) | 10분 | 15분 | 25분 |
| Therapy (일일) | 5분 | 12분 | 30분 |
| Dashboard 확인 | 30초 | 2분 | 5분 |
| Settings 변경 | 30초 | 1분 | 3분 |

---

## 9. 플로우 검증 체크리스트

### 사용성 테스트 질문

**Onboarding**:
- [ ] 신규 사용자가 5분 이내 첫 Insight 시작 가능한가?
- [ ] 회원가입 이탈률 < 30%인가?

**Insight**:
- [ ] 10개 문장 쌍 완료율 > 70%인가?
- [ ] 중간 이탈 시 복구 가능한가?

**Therapy**:
- [ ] 첫 문장 완료 후 계속 진행률 > 80%인가?
- [ ] 사용자가 마스터리 개념을 이해하는가?

**Dashboard**:
- [ ] 사용자가 자신의 진행 상황을 한눈에 파악 가능한가?
- [ ] 다음 행동 유도가 명확한가?

---

## 10. 향후 개선 계획

### v2.0 플로우 개선
- **Smart Nudges**: 사용 패턴 분석 후 맞춤형 푸시
- **Social Flow**: 친구 초대, 함께 연습 기능
- **Custom Flow**: 사용자가 직접 문장 작성 및 연습

### v3.0 고급 기능
- **Adaptive Flow**: AI 기반 실시간 난이도 조절
- **Voice Flow**: 음성 안내 모드
- **Gamification Flow**: 미션, 챌린지 시스템

---

**문서 버전**: 1.0
**작성일**: 2025-01-30
**작성자**: Product Manager (Sub-Agent)
**검토 필요**: UX Designer (사용성), Implementation Lead (구현 가능성)
**다음 단계**: UI 컴포넌트 명세 작성
