# TheraType 핵심 기능 상세 설계

**문서 목적**: MainHub, Insight Mode, Therapy Mode의 구체적인 설계 및 헬스케어 데이터 수집 메커니즘 정의

---

## 🏠 0. MainHub (중앙 허브)

### 0.1 컨셉 및 목표

**핵심 아이디어**
> "원하는 모드를 자유롭게 선택할 수 있는 중앙 허브"

**목표**
- 사용자에게 모든 모드의 개요를 한눈에 제공
- 강제되지 않는 유연한 사용자 여정 지원
- 진행 상태 시각화로 동기부여 증진
- 향후 확장될 모드에 대한 기대감 형성

**차별점**
- 기존 앱: 정해진 순서대로 강제 진행
- TheraType: 사용자가 원하는 순간에 원하는 모드 접근

---

### 0.2 모드 구성

#### 활성화된 모드 (현재 사용 가능)

| 모드 | 아이콘 | 설명 | 주요 기능 |
|------|--------|------|----------|
| **Insight Mode** | 🔍 | 자기인식 및 선호도 탐색 | 10개 문장 쌍 선택, 심리 프로파일 분석 |
| **Therapy Mode** | 💚 | 맞춤형 긍정 자극 타이핑 | 프로파일 기반 문장 연습 (또는 데모 모드) |
| **Dashboard** | 📊 | 진행 현황 및 통계 | 타이핑 실력, 감정 추이 시각화 |

#### Coming Soon 모드 (향후 구현 예정)

| 모드 | 아이콘 | 설명 | 구현 시기 |
|------|--------|------|----------|
| **Journal Mode** | 📔 | 감정 일기 작성 | MVP 이후 |
| **Free Writing** | ✍️ | 자유로운 타이핑 연습 | MVP 이후 |
| **Challenge Mode** | 🎯 | 타이핑 챌린지 | MVP 이후 |

**MVP 범위**: Coming Soon 모드는 버튼만 표시되며, 실제 기능은 구현하지 않음

---

### 0.3 사용자 플로우

```
사이트 접속
    ↓
MainHub (/)
    ↓
┌─────────┬─────────────┬────────────┐
│ Insight │   Therapy   │  Dashboard │
│  Mode   │    Mode     │            │
└─────────┴─────────────┴────────────┘
    ↓           ↓             ↓
각 모드 실행 (언제든지 MainHub로 복귀 가능)
```

**유연성**
- Insight Mode를 완료하지 않아도 Therapy Mode 체험 가능 (데모 모드)
- 언제든지 모드 간 자유로운 이동
- 진행 상태는 localStorage에 저장되어 다음 방문 시 이어서 진행

---

### 0.4 UI/UX 설계

#### MainHub 화면 구성

```
┌─────────────────────────────────────────────┐
│              TheraType                      │
│     타이핑으로 시작하는 마음 케어             │
├─────────────────────────────────────────────┤
│                                             │
│  원하는 모드를 선택해서 시작해보세요         │
│                                             │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐    │
│  │  🔍     │  │  💚     │  │  📊     │    │
│  │ Insight │  │ Therapy │  │Dashboard│    │
│  │  Mode   │  │  Mode   │  │         │    │
│  │         │  │         │  │         │    │
│  │[10/10✓]│  │[시작하기]│  │ [보기]  │    │
│  └─────────┘  └─────────┘  └─────────┘    │
│                                             │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐    │
│  │  📔     │  │  ✍️     │  │  🎯     │    │
│  │ Journal │  │  Free   │  │Challenge│    │
│  │  [Soon] │  │  [Soon] │  │  [Soon] │    │
│  │   🔒    │  │   🔒    │  │   🔒    │    │
│  └─────────┘  └─────────┘  └─────────┘    │
│                                             │
└─────────────────────────────────────────────┘
```

#### ModeCard 디자인 원칙

**활성화 카드**
- 풀컬러 표시
- 호버 시 그림자 효과 증가 및 살짝 들림
- 진행도가 있는 경우 프로그레스 바 표시
- 클릭 시 해당 모드로 즉시 이동

**Coming Soon 카드**
- 그레이스케일 필터 적용 (opacity: 0.6)
- "Soon" 배지 표시 (우측 상단)
- 잠금 아이콘 (🔒) 오버레이
- 클릭 불가 (cursor: not-allowed)

**완료 카드**
- 완료 배지 표시 (✓)
- 프로그레스 바 100%
- 재방문 가능

---

### 0.5 데이터 수집 및 진행도 추적

#### localStorage 구조

```javascript
// Insight Mode 진행 상태
{
  "insightResults": {
    "selections": [...],  // 선택한 문장들
    "completedAt": "2025-01-30T...",
    "assignedProfile": "stress_management"
  }
}

// Therapy Mode 세션 기록
{
  "therapySessions": {
    "profileKey": "stress_management",
    "sessions": [...]  // 타이핑 세션들
  }
}
```

#### 진행도 계산 로직

| 모드 | 완료 조건 | 진행도 표시 |
|------|-----------|------------|
| Insight Mode | 10개 문장 쌍 완료 | "10/10 완료 ✓" |
| Therapy Mode | 세션 존재 여부 | "체험 중" 또는 "맞춤형" |
| Dashboard | 항상 접근 가능 | "보기" |

---

### 0.6 핵심 가치 제안

**사용자 관점**
- ✅ "어디서부터 시작해야 할지 한눈에 보인다"
- ✅ "강제되지 않아서 부담 없다"
- ✅ "내 진행 상황을 확인할 수 있다"
- ✅ "앞으로 더 많은 기능이 추가될 거라는 기대감"

**비즈니스 관점**
- ✅ 사용자 이탈 방지 (Insight 강제 → 이탈률 감소)
- ✅ 재방문율 증가 (자유로운 모드 선택)
- ✅ 확장 가능성 시각화 (Coming Soon 모드)
- ✅ 데이터 수집 유연성 (Therapy 데모 모드로도 수집)

---

## 📊 1. Insight Mode (인사이트 모드) 상세 설계

### 1.1 컨셉 및 목표

**핵심 아이디어**
> "자유롭게 글을 쓰라"고 하면 어렵지만, "두 문장 중 하나를 고르라"고 하면 쉽다.

**목표**
- 사용자의 심리적 패턴, 가치관, 스트레스 요인 파악
- 낮은 부담으로 자기인식 촉진
- Therapy Mode 개인화를 위한 데이터 수집

**차별점**
- 기존 저널링 앱: 빈 화면에 자유 작문 → 부담스러움
- TheraType: 공감되는 문장을 선택하며 타이핑 → 쉽고 재미있음

---

### 1.2 문장 쌍 설계 (Sentence Pair Design)

#### 설계 원칙
1. **대조성 (Contrast)**: 두 문장은 명확히 다른 관점/태도를 대표
2. **중립성 (Neutrality)**: 어느 쪽도 "정답"이 아님, 선호도 차이
3. **공감성 (Relatability)**: 일상에서 흔히 느끼는 감정/생각
4. **간결성 (Brevity)**: 한 문장 20-40자 (타이핑 부담 최소화)

#### 카테고리 체계 (5개 주요 영역)

##### 카테고리 1: 자기인식 (Self-Perception)
**측정 목표**: 자존감 수준, 자기비판 경향

| ID | 문장 A (긍정적) | 문장 B (부정적) | 측정 차원 |
|----|----------------|----------------|----------|
| SP1 | 나는 내 장점과 강점을 잘 알고 있다 | 나는 내 단점이 더 많이 눈에 띈다 | 자존감 |
| SP2 | 실수했을 때 나를 용서할 수 있다 | 실수하면 한참 동안 자책한다 | 자기비판 |
| SP3 | 나는 충분히 잘하고 있다고 느낀다 | 항상 더 잘해야 한다는 압박감이 있다 | 성취 압박 |
| SP4 | 타인의 평가보다 내 판단을 신뢰한다 | 타인이 나를 어떻게 볼지 많이 신경 쓴다 | 외적 검증 의존 |

**프로파일 매핑**: A 선택 많음 → 건강한 자존감 / B 선택 많음 → 자존감 향상 필요

##### 카테고리 2: 스트레스 대응 (Stress Response)
**측정 목표**: 스트레스 대처 전략, 회복탄력성

| ID | 문장 A (적응적) | 문장 B (부적응적) | 측정 차원 |
|----|----------------|------------------|----------|
| SR1 | 어려움이 와도 결국 해결할 수 있다고 믿는다 | 문제가 생기면 감당하지 못할 것 같다 | 통제감 |
| SR2 | 스트레스를 받으면 휴식을 취한다 | 스트레스를 받으면 더 일에 몰두한다 | 대처 방식 |
| SR3 | 힘들 때 도움을 요청할 수 있다 | 힘들어도 혼자 견뎌야 한다고 생각한다 | 사회적 지지 활용 |
| SR4 | 나쁜 날도 있지만 곧 나아질 거라 믿는다 | 힘든 상황이 계속될 것 같아 불안하다 | 낙관성 |

**프로파일 매핑**: A 선택 많음 → 스트레스 관리 양호 / B 선택 많음 → 스트레스 관리 지원 필요

##### 카테고리 3: 사회적 에너지 (Social Energy)
**측정 목표**: 내향성/외향성, 사회적 에너지 충전 방식

| ID | 문장 A (내향적) | 문장 B (외향적) | 측정 차원 |
|----|----------------|----------------|----------|
| SE1 | 혼자 있는 시간이 나를 회복시킨다 | 사람들과 함께 있을 때 에너지를 얻는다 | 에너지 원천 |
| SE2 | 깊은 대화를 나누는 소수의 친구를 선호한다 | 다양한 사람들과 가볍게 교류하는 걸 즐긴다 | 관계 선호 |
| SE3 | 사교 모임 후에는 재충전이 필요하다 | 사교 모임 후에 더 활기차다 | 사회적 피로도 |
| SE4 | 조용한 환경에서 집중이 잘 된다 | 북적이는 카페에서 일이 잘 된다 | 환경 선호 |

**프로파일 매핑**: A 선택 많음 → 내향형 / B 선택 많음 → 외향형 (치료적 개입과는 무관, 개인화 용도)

##### 카테고리 4: 감정 조절 (Emotion Regulation)
**측정 목표**: 감정 인식 및 조절 능력

| ID | 문장 A (조절 가능) | 문장 B (조절 어려움) | 측정 차원 |
|----|-------------------|---------------------|----------|
| ER1 | 내가 왜 이런 감정을 느끼는지 이해한다 | 갑자기 감정이 올라와서 당황스럽다 | 감정 인식 |
| ER2 | 화가 나도 진정하고 생각할 수 있다 | 감정이 격해지면 통제가 어렵다 | 감정 조절 |
| ER3 | 슬플 때 울면서 감정을 풀 수 있다 | 슬퍼도 참아야 한다고 생각한다 | 감정 표현 |
| ER4 | 부정적 감정도 자연스럽게 받아들인다 | 부정적 감정을 느끼면 나쁜 사람 같다 | 감정 수용 |

**프로파일 매핑**: A 선택 많음 → 감정 조절 양호 / B 선택 많음 → 감정 조절 지원 필요

##### 카테고리 5: 미래 지향성 (Future Orientation)
**측정 목표**: 낙관성, 목표 의식, 희망

| ID | 문장 A (긍정적) | 문장 B (부정적) | 측정 차원 |
|----|----------------|----------------|----------|
| FO1 | 미래에 좋은 일이 기다리고 있을 거라 믿는다 | 미래가 불확실하고 불안하다 | 낙관성 |
| FO2 | 내가 원하는 삶을 만들어갈 수 있다 | 상황에 떠밀려 살고 있는 것 같다 | 주체성 |
| FO3 | 지금 하는 일이 의미 있다고 느낀다 | 무엇을 위해 사는지 모르겠다 | 의미감 |
| FO4 | 어제보다 나은 내가 되고 있다 | 제자리걸음인 것 같아 답답하다 | 성장감 |

**프로파일 매핑**: A 선택 많음 → 동기부여 양호 / B 선택 많음 → 동기부여 지원 필요

---

### 1.3 사용자 플로우 (User Flow)

#### 모드 진입
- **출발점**: MainHub에서 "Insight Mode" 카드 선택
- **언제든지**: MainHub로 복귀 가능 (진행 상태는 localStorage에 저장됨)

#### 초기 평가 (Onboarding, 세션 1)
1. **Welcome Screen**: "당신의 생각과 감정을 이해하는 시간"
2. **설명**: "공감되는 문장을 선택하고 타이핑해보세요. 정답은 없습니다."
3. **문장 제시**: 5개 카테고리 × 각 2개 = 10개 문장 쌍 제시
4. **선택 및 타이핑**: 사용자가 선택한 문장을 타이핑
5. **결과 제시**: "당신의 현재 상태" 인사이트 요약
6. **다음 단계 안내**: "Therapy Mode에서 맞춤형 문장을 연습해보세요" (MainHub로 복귀 버튼)

**화면 구성**
```
┌─────────────────────────────────────┐
│  Insight Mode - 당신은 어떤 사람인가요?  │
├─────────────────────────────────────┤
│                                     │
│  [문장 A]                            │
│  ┌───────────────────────────────┐  │
│  │ 나는 충분히 잘하고 있다고 느낀다  │  │
│  └───────────────────────────────┘  │
│         [ 이 문장 선택하기 ]          │
│                                     │
│           또는                       │
│                                     │
│  [문장 B]                            │
│  ┌───────────────────────────────┐  │
│  │ 항상 더 잘해야 한다는 압박감이... │  │
│  └───────────────────────────────┘  │
│         [ 이 문장 선택하기 ]          │
│                                     │
│  진행: ████████░░ 8/10              │
└─────────────────────────────────────┘
```

#### 정기 체크인 (주 1-2회)
- 2-3개 문장 쌍만 제시 (부담 최소화)
- 변화 추적: "지난주와 비교해 긍정적 선택이 증가했어요"

---

### 1.4 심리 프로파일 매핑 알고리즘

#### 점수 계산
각 카테고리별로 긍정적(A) 선택 비율 계산

```
자기인식 점수 = (A 선택 개수 / 전체 문항 수) × 100
```

예시:
- 자기인식 카테고리 4문항 중 A를 3개 선택 → 75점 (양호)
- 스트레스 대응 카테고리 4문항 중 A를 1개 선택 → 25점 (지원 필요)

#### 프로파일 분류 (Therapy Mode 맞춤화)

| 프로파일 | 조건 | 필요 개입 |
|---------|------|----------|
| **자존감 향상형** | 자기인식 점수 < 50 | 자기긍정, 자기수용 문구 |
| **스트레스 관리형** | 스트레스 대응 점수 < 50 | 이완, 통제감 회복 문구 |
| **감정조절형** | 감정조절 점수 < 50 | 감정 인식, 수용 문구 |
| **동기부여형** | 미래 지향성 점수 < 50 | 목표, 의미, 성장 문구 |
| **균형형** | 모든 영역 ≥ 50 | 유지 및 강화 문구 |

**다중 프로파일**: 여러 영역에서 낮은 점수 → 우선순위: 스트레스 > 감정조절 > 자존감 > 동기부여

---

### 1.5 Keystroke Dynamics 데이터 수집

**수집 데이터**

| 메트릭 | 정의 | 가설 |
|-------|------|------|
| **선택 전 망설임 시간** | 문장 쌍 제시 후 선택까지 시간 | 긴 망설임 = 내적 갈등, 양가감정 |
| **타이핑 시작 지연** | 선택 후 타이핑 시작까지 시간 | 긴 지연 = 선택한 문장에 대한 저항 |
| **타이핑 리듬** | 키 간 간격의 일관성 | 불규칙 = 감정적 동요 |
| **백스페이스 빈도** | 수정 횟수 | 많은 수정 = 완벽주의, 불안 |
| **타이핑 속도 변화** | 문장별 WPM 차이 | 특정 주제에서 속도 저하 = 인지적 저항 |

**활용 방법** (MVP에서는 수집만, 장기적으로 분석)
- 연구 질문: "부정적 문장을 타이핑할 때 더 느린가?"
- 감정 상태 추정: 전반적 타이핑 속도 저하 → 우울/피로 가능성
- 개인화: 특정 카테고리에서 망설임 많음 → 해당 영역 집중 개입

---

### 1.6 인사이트 제공 (결과 화면)

#### 즉시 피드백
문장 쌍 완료 후 간단한 요약

```
┌─────────────────────────────────────┐
│  당신의 현재 모습                      │
├─────────────────────────────────────┤
│  ✓ 자기인식: 75점 (양호)              │
│    당신은 자신의 강점을 잘 알고 있어요 │
│                                     │
│  ⚠ 스트레스 대응: 25점               │
│    최근 스트레스에 압도되는 느낌이    │
│    있을 수 있어요                     │
│                                     │
│  → Therapy Mode에서                 │
│     스트레스 관리 문구를 추천해요      │
└─────────────────────────────────────┘
```

#### 추세 분석 (주간/월간)
```
┌─────────────────────────────────────┐
│  이번 주 변화                         │
├─────────────────────────────────────┤
│  자기인식       ████████░░ 75 (+10)  │
│  스트레스 대응   ██░░░░░░░░ 25 (-5)  │
│  감정 조절      ████░░░░░░ 40 (→)   │
│  미래 지향성     ██████░░░░ 60 (+5)  │
│                                     │
│  💡 지난주보다 긍정적 선택이 2개 증가! │
└─────────────────────────────────────┘
```

---

## 💊 2. Therapy Mode (테라피 모드) 상세 설계

### 2.1 컨셉 및 목표

**핵심 아이디어**
> "반복해서 타이핑하면, 손도 기억하고, 마음도 기억한다."

**목표**
- Insight Mode 결과 기반 맞춤형 긍정 문구 제공 (또는 데모 모드로 체험)
- 타이핑 행위를 통한 긍정적 자기대화 내면화
- 측정 가능한 타이핑 실력 향상 (동기부여)

**3중 학습 효과**
1. **읽기 (Visual)**: 화면에 표시된 문구를 읽으며 인지
2. **타이핑 (Motor)**: 손가락 움직임으로 신체 기억
3. **내면화 (Cognitive)**: 타이핑하며 문구의 의미를 음미

---

### 2.1.1 모드 진입 방식 (2가지)

#### 방식 1: 맞춤형 모드 (Insight Mode 완료 후)
- **진입 조건**: Insight Mode 10개 문장 쌍 완료 → 심리 프로파일 할당
- **제공 문장**: 할당된 프로파일에 맞는 치료적 문구 (예: 스트레스 관리형 → 스트레스 완화 문구)
- **장점**: 개인화된 경험, 높은 치료 효과

#### 방식 2: 데모 모드 (Insight Mode 없이 바로 접근)
- **진입 조건**: MainHub에서 Therapy Mode 직접 선택
- **제공 문장**: 중립적이고 보편적인 긍정 문구 (프로파일: `demo`)
- **안내 배너**: "Insight Mode를 완료하면 당신에게 딱 맞는 맞춤형 문장을 추천받을 수 있어요"
- **장점**: 낮은 진입장벽, Therapy Mode 미리 체험 가능, 사용자 이탈 방지

**데모 모드 문장 예시**
- "오늘 하루도 잘 버텨냈다"
- "나는 나만의 속도로 나아간다"
- "어려운 순간도 성장의 기회가 될 수 있다"
- "나는 충분히 잘하고 있다"
- "지금 이 순간을 소중히 여긴다"

**전환 유도**
- 데모 모드 사용 중 주기적으로 "Insight Mode로 더 정확한 맞춤형 경험" 안내
- Insight Mode 완료 시 기존 데모 세션 데이터는 유지, 프로파일만 업그레이드

---

### 2.2 프로파일별 문장 라이브러리

#### 프로파일 1: 자존감 향상형
**목표**: 자기수용, 자기긍정, 내적 가치 인식

**문장 예시 (난이도별)**

| 난이도 | 문장 | 글자수 | 타이핑 목표 |
|-------|------|--------|-----------|
| 초급 | 나는 소중한 사람이다 | 11 | 기본 자기긍정 |
| 초급 | 나는 존중받을 자격이 있다 | 14 | 가치 인정 |
| 중급 | 실수는 나를 정의하지 않는다 | 16 | 완벽주의 완화 |
| 중급 | 나는 충분히 노력하고 있으며 그것만으로도 가치 있다 | 28 | 노력 인정 |
| 고급 | 타인의 기준이 아닌 나만의 기준으로 나를 평가한다 | 28 | 외적 검증 탈피 |
| 고급 | 나의 약점도 나를 이루는 소중한 부분이며 개선의 기회다 | 30 | 약점 수용 |

**테마 분류**
- 자기수용: 있는 그대로의 나 인정
- 자기긍정: 나의 강점과 노력 인정
- 자기연민: 힘든 나를 위로하기

#### 프로파일 2: 스트레스 관리형
**목표**: 통제감 회복, 이완, 문제 해결 관점

**문장 예시**

| 난이도 | 문장 | 글자수 | 타이핑 목표 |
|-------|------|--------|-----------|
| 초급 | 나는 이 순간을 견딜 수 있다 | 15 | 즉각적 위안 |
| 초급 | 깊게 숨을 쉬면 마음이 차분해진다 | 19 | 이완 기법 |
| 중급 | 모든 문제에는 해결책이 있다 | 16 | 통제감 |
| 중급 | 어려운 상황도 시간이 지나면 지나간다 | 21 | 일시성 인식 |
| 고급 | 내가 통제할 수 없는 것은 놓아주고 할 수 있는 것에 집중한다 | 33 | 선택적 통제 |
| 고급 | 스트레스는 내가 성장하고 있다는 신호일 수 있다 | 27 | 재해석 |

**테마 분류**
- 이완: 호흡, 마음챙김
- 통제감: 문제 해결, 선택
- 관점 전환: 재해석, 성장

#### 프로파일 3: 감정조절형
**목표**: 감정 인식, 수용, 건강한 표현

**문장 예시**

| 난이도 | 문장 | 글자수 | 타이핑 목표 |
|-------|------|--------|-----------|
| 초급 | 내 감정을 느끼는 것은 자연스럽다 | 18 | 감정 정상화 |
| 초급 | 슬플 때 우는 것은 약한 게 아니다 | 18 | 표현 허용 |
| 중급 | 감정에 이름을 붙이면 이해할 수 있다 | 20 | 감정 명명 |
| 중급 | 화가 나도 괜찮다 중요한 건 어떻게 표현하느냐다 | 27 | 조절 가능성 |
| 고급 | 부정적 감정도 내게 무언가 알려주려는 메시지가 있다 | 29 | 감정의 기능 |
| 고급 | 감정의 파도는 오르고 내린다 영원히 지속되지 않는다 | 30 | 일시성 |

**테마 분류**
- 감정 인식: 명명, 위치 파악
- 감정 수용: 정상화, 비판단
- 감정 표현: 건강한 방출

#### 프로파일 4: 동기부여형
**목표**: 목표 의식, 의미감, 성장 마인드셋

**문장 예시**

| 난이도 | 문장 | 글자수 | 타이핑 목표 |
|-------|------|--------|-----------|
| 초급 | 나는 매일 조금씩 성장하고 있다 | 17 | 진행 중 |
| 초급 | 오늘의 작은 노력이 미래를 만든다 | 19 | 일일 행동 |
| 중급 | 완벽하지 않아도 계속 나아간다 | 17 | 진행 우선 |
| 중급 | 실패는 끝이 아니라 배움의 기회다 | 19 | 성장 마인드셋 |
| 고급 | 내가 하는 일은 나와 타인에게 긍정적 영향을 미친다 | 28 | 의미감 |
| 고급 | 어제보다 나은 오늘을 만들기 위해 할 수 있는 일을 한다 | 31 | 주체성 |

**테마 분류**
- 성장: 과정 중시, 학습
- 목표: 방향성, 의지
- 의미: 영향력, 가치

---

### 2.3 맞춤형 알고리즘

#### 문장 선택 로직

**1단계: 프로파일 매칭**
```
IF Insight 점수["자기인식"] < 50:
    Primary Profile = "자존감 향상형"
    주 문장 풀 = 자존감 향상형 라이브러리
```

**2단계: 난이도 조절**
```
IF 사용자 평균 WPM < 30:
    난이도 = "초급" (11-15자)
ELIF 사용자 평균 WPM < 50:
    난이도 = "중급" (16-22자)
ELSE:
    난이도 = "고급" (23-35자)
```

**3단계: 테마 로테이션**
- 같은 테마 연속 3회 이상 방지
- 세션당 3-4개 다른 테마 노출

**4단계: 복습 주기 (Spaced Repetition)**
```
복습 주기:
- 1일 후
- 3일 후
- 7일 후
- 14일 후
```

#### 세션 구성 (1회 15분 기준)
```
┌─────────────────────────────────────┐
│  오늘의 Therapy Mode                 │
├─────────────────────────────────────┤
│  1. 워밍업 (3분)                     │
│     - 이전에 연습한 문장 1-2개       │
│                                     │
│  2. 새로운 문장 (7분)                │
│     - 프로파일 기반 새 문장 3-4개    │
│                                     │
│  3. 도전 과제 (3분)                  │
│     - 긴 문장 또는 복합 문장 1-2개   │
│                                     │
│  4. 마무리 (2분)                     │
│     - 오늘 가장 인상 깊은 문장       │
│     - 진행도 요약                    │
└─────────────────────────────────────┘
```

---

### 2.4 타이핑 인터페이스 설계

#### 화면 레이아웃
```
┌───────────────────────────────────────────┐
│  Therapy Mode - 스트레스 관리              │
├───────────────────────────────────────────┤
│                                           │
│  [제시 문장]                               │
│  ┌───────────────────────────────────────┐│
│  │  나는 이 순간을 견딜 수 있다           ││
│  └───────────────────────────────────────┘│
│                                           │
│  [타이핑 영역]                             │
│  ┌───────────────────────────────────────┐│
│  │  나는 이_                              ││
│  └───────────────────────────────────────┘│
│                                           │
│  속도: 45 WPM  |  정확도: 96%              │
│  진행: ████████████░░░░  3/5             │
│                                           │
│  💡 Tip: 천천히 문장의 의미를 느껴보세요   │
└───────────────────────────────────────────┘
```

#### 피드백 메커니즘

**즉시 피드백**
- ✓ 정확: 초록색 하이라이트
- ✗ 오류: 빨간색 하이라이트, 자동 커서 위치로 복귀

**완료 후 피드백**
```
┌───────────────────────────────────────────┐
│  완료! 🎉                                  │
├───────────────────────────────────────────┤
│  "나는 이 순간을 견딜 수 있다"             │
│                                           │
│  ⚡ 속도: 48 WPM (+3 from average)        │
│  🎯 정확도: 98%                            │
│  ⏱️ 소요 시간: 12초                        │
│                                           │
│  이 문장을 3번 더 연습하면                 │
│  완전히 내 것이 될 거예요!                 │
│                                           │
│  [ 다음 문장 ] [ 한 번 더 ]               │
└───────────────────────────────────────────┘
```

---

### 2.5 진행도 추적 및 보상

#### 진행도 메트릭

| 메트릭 | 정의 | 목표 |
|-------|------|------|
| **마스터리** | 동일 문장 3회 이상, 정확도 95%+ | 각 문장 내면화 |
| **일일 스트릭** | 연속 사용 일수 | 습관 형성 (21일) |
| **타이핑 성장** | 초기 WPM 대비 증가율 | 객관적 스킬 증명 |
| **문장 다양성** | 경험한 테마 수 | 전인적 성장 |

#### 보상 시스템

**배지 (Badges)**
- 🌱 첫 걸음: 첫 세션 완료
- 🔥 연속 3일: 3일 연속 사용
- 🏆 연속 7일: 1주일 연속
- ⭐ 연속 21일: 습관 형성 달성
- 🚀 타이핑 마스터: 평균 WPM 60+ 달성
- 💎 완벽주의자: 10개 문장 마스터리 달성

**레벨 시스템**
```
Level 1: 새싹 (0-10 문장)
Level 2: 꽃봉오리 (11-30 문장)
Level 3: 만개 (31-60 문장)
Level 4: 열매 (61-100 문장)
Level 5: 나무 (100+ 문장)
```

---

## 📈 3. 헬스케어 데이터 수집 상세 설계

### 3.1 데이터 아키텍처

#### 데이터 레이어

```
┌─────────────────────────────────────────┐
│  수집 레이어 (Collection Layer)          │
│  - 사용자 행동 캡처                      │
│  - 키스트로크 로깅                       │
│  - 선택 기록                             │
└─────────────────────────────────────────┘
           ↓
┌─────────────────────────────────────────┐
│  저장 레이어 (Storage Layer)             │
│  - 원시 데이터 (Raw Data)                │
│  - 전처리된 데이터 (Processed Data)      │
│  - 집계 데이터 (Aggregated Data)         │
└─────────────────────────────────────────┘
           ↓
┌─────────────────────────────────────────┐
│  분석 레이어 (Analytics Layer)           │
│  - 개인 프로파일 생성                    │
│  - 추세 분석                             │
│  - 이상 탐지 (급격한 변화)               │
└─────────────────────────────────────────┘
           ↓
┌─────────────────────────────────────────┐
│  인사이트 레이어 (Insights Layer)        │
│  - 사용자 피드백                         │
│  - 개인화 추천                           │
│  - 연구 데이터 (익명화)                  │
└─────────────────────────────────────────┘
```

---

### 3.2 수집 데이터 상세

#### 3.2.1 Insight Mode 데이터

**문장 선택 데이터**
```json
{
  "user_id": "anon_12345",
  "session_id": "ses_20250130_001",
  "timestamp": "2025-01-30T14:23:45Z",
  "category": "self_perception",
  "pair_id": "SP1",
  "sentence_a": "나는 내 장점과 강점을 잘 알고 있다",
  "sentence_b": "나는 내 단점이 더 많이 눈에 띈다",
  "selected": "B",
  "selection_time_ms": 4500,  // 문장 제시 후 선택까지
  "confidence": "hesitant"  // 빠름(<2초), 보통(2-5초), 망설임(>5초)
}
```

**타이핑 행동 데이터**
```json
{
  "user_id": "anon_12345",
  "session_id": "ses_20250130_001",
  "sentence_id": "SP1_B",
  "keystrokes": [
    {"key": "ㄴ", "timestamp": 1000, "event": "down"},
    {"key": "ㄴ", "timestamp": 1150, "event": "up"},
    {"key": "ㅏ", "timestamp": 1200, "event": "down"},
    // ...
  ],
  "metrics": {
    "wpm": 42,
    "accuracy": 94,
    "backspace_count": 3,
    "total_time_ms": 8500,
    "pause_count": 2,  // >2초 멈춤
    "pause_locations": [5, 12]  // 글자 위치
  }
}
```

#### 3.2.2 Therapy Mode 데이터

**문장 연습 데이터**
```json
{
  "user_id": "anon_12345",
  "session_id": "ses_20250130_002",
  "sentence_id": "stress_mgmt_01",
  "sentence_text": "나는 이 순간을 견딜 수 있다",
  "profile": "stress_management",
  "difficulty": "beginner",
  "attempt_number": 2,  // 이 문장 몇 번째 시도
  "performance": {
    "wpm": 45,
    "accuracy": 98,
    "time_ms": 12000,
    "error_positions": [8],
    "hesitation_points": []
  },
  "mastery_status": "in_progress"  // new, in_progress, mastered
}
```

#### 3.2.3 종단 추적 데이터

**주간 요약**
```json
{
  "user_id": "anon_12345",
  "week": "2025-W05",
  "usage": {
    "total_sessions": 5,
    "total_minutes": 67,
    "streak_days": 5
  },
  "insight_profile": {
    "self_perception": 75,
    "stress_response": 25,
    "emotion_regulation": 40,
    "future_orientation": 60,
    "change_from_last_week": {
      "self_perception": +10,
      "stress_response": -5
    }
  },
  "therapy_progress": {
    "sentences_attempted": 28,
    "sentences_mastered": 8,
    "avg_wpm": 45,
    "avg_accuracy": 95,
    "wpm_growth": +8  // 첫 주 대비
  },
  "optional_self_report": {
    "mood_rating": 3,  // 1-5 scale
    "stress_level": 4,
    "notes": "이번 주 업무 스트레스 높음"
  }
}
```

---

### 3.3 프라이버시 보호 메커니즘

#### 익명화 전략

**수집 시점 익명화**
```
실제 사용자: user@email.com
→ 저장: anon_a8f3k2j1 (해시)
```

**개인 식별 정보 분리**
```
테이블 1 (식별 정보): user_id ↔ email, name
테이블 2 (행동 데이터): anon_id, 모든 사용 데이터
→ 연결 불가능하게 저장
```

#### 동의 관리

**4단계 동의**
1. **필수**: 서비스 이용을 위한 최소 데이터 (익명 ID, 타이핑 데이터)
2. **선택 1**: 프로파일 개인화를 위한 Insight 데이터 저장
3. **선택 2**: 서비스 개선을 위한 집계 데이터 활용
4. **선택 3**: 학술 연구 목적 익명 데이터 제공

사용자는 언제든 2-4단계 동의 철회 가능

---

### 3.4 분석 및 인사이트 도출

#### 개인 수준 분석

**1. 진행도 추적**
- 타이핑 속도/정확도 증가 그래프
- Insight 점수 변화 추이
- 사용 습관 (시간대, 빈도)

**2. 패턴 인식**
```python
# 예시: 스트레스 패턴 탐지
IF insight_score["stress_response"] < 30 for 2 weeks:
    AND therapy_usage drops:
    → Alert: "최근 스트레스가 높아 보여요. 짧은 이완 세션을 추천드려요"
```

**3. 개인화 추천**
- "당신은 저녁 시간에 가장 집중력이 높네요"
- "감정 조절 문장을 연습한 주에 Insight 점수가 올랐어요"

#### 집단 수준 분석 (연구 목적)

**익명화된 코호트 분석**
- 연령대별 타이핑 속도 분포
- 프로파일별 문장 선호도
- 사용 패턴과 정신건강 지표 상관관계

**예시 연구 질문**
1. "Therapy Mode 사용 빈도와 Insight 점수 개선의 상관관계는?"
2. "어떤 유형의 문장이 가장 높은 마스터리율을 보이는가?"
3. "Keystroke dynamics로 감정 상태를 얼마나 정확히 예측할 수 있는가?"

---

## 🎯 4. 4주 MVP 구현 범위

### 4.1 포함되는 기능

✅ **Insight Mode**
- 5개 카테고리 × 2개 문장 쌍 = 10개 문장
- 선택 및 타이핑 인터페이스
- 기본 프로파일 생성 (점수 계산)
- 간단한 결과 요약

✅ **Therapy Mode**
- 4개 프로파일 × 각 5개 문장 = 20개 문장 (초급 중심)
- 난이도별 문장 제시
- 타이핑 연습 인터페이스
- WPM/정확도 측정

✅ **대시보드**
- 진행도 그래프 (타이핑 속도)
- Insight 점수 표시
- 연속 사용 일수

✅ **데이터 수집**
- 키스트로크 로깅
- 선택 패턴 저장
- 기본 분석 (개인 통계)

### 4.2 제외되는 기능 (향후 계획)

❌ **고급 AI 개인화**: 규칙 기반으로 대체
❌ **실시간 감정 분석**: 데이터 수집만
❌ **소셜 기능**: 커뮤니티, 리더보드 등
❌ **모바일 앱**: 웹 반응형만
❌ **임상 검증**: 사용자 피드백 설문만

---

## 📚 과학적 근거 요약

### Insight Mode 근거
- **Pennebaker (1986)**: 감정 언어화의 치료 효과
- **선택 기반 접근**: 자유 작문보다 부담 감소 (참여도 ↑)
- **Keystroke dynamics**: 감정 상태 추정 가능성 (Epp et al., 2011)

### Therapy Mode 근거
- **Self-Affirmation Theory (Steele, 1988)**: 자기긍정 효과
- **CBT 원리**: 반복된 긍정적 사고가 부정적 패턴 교정
- **Spaced Repetition**: 장기 기억 형성에 효과적
- **Embodied Cognition**: 신체 행위(타이핑) + 인지 = 강화된 학습

### 데이터 수집 근거
- **Keystroke dynamics 연구**: 행동 바이오마커로서 가능성 (Giancardo et al., 2016 - Scientific Reports, 연구 단계)
- **Digital phenotyping**: 수동적 데이터로 정신 건강 모니터링

<!-- REFERENCE CORRECTED: Giancardo 2016 연구는 Scientific Reports에 게재된 학술 연구. FDA 승인 의료기기 아님. neuroQWERTY는 2020년 FDA Breakthrough Device Designation 획득 (승인과는 다름) -->

---

**문서 버전**: 1.0
**최종 수정**: 2025-01-30
**다음 단계**: PROJECT_PROPOSAL.md 작성 (헬스케어 센터 제출용)
